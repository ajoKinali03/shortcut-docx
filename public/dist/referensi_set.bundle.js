"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkshortcut_docx"] = self["webpackChunkshortcut_docx"] || []).push([["referensi_set"],{

/***/ "./public/javascripts/module/referensi_set.js":
/*!****************************************************!*\
  !*** ./public/javascripts/module/referensi_set.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _client_save_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client_save.js */ \"./public/javascripts/module/client_save.js\");\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\n\nfunction init() {\n  // tahap melakukan penyimpanan dummy dan untuk menampilkan data yang tersimpan\n  (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.displayData)(2).then(function (res) {\n    if (res) {\n      res.ref.forEach(function (e, i) {\n        if (e != null) {\n          crtShowDt(e);\n        }\n      });\n    } else {\n      (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.saveData)([null], 2, \"ref\");\n    }\n  })[\"catch\"](function (err) {\n    return err;\n  });\n  var cntrRefInpt = document.getElementsByClassName(\"container-input\")[0];\n  var selectType = document.getElementById(\"tipe-ref\");\n  var optType = document.getElementsByTagName(\"option\");\n  var btnConfirmTxt = document.getElementById(\"btn-confirm-text\");\n  var btnHapusSemua = document.getElementById(\"btn-hapus-semua\");\n  var inptTxt = document.getElementsByClassName(\"inpt-txt\");\n  var cntrRef = document.getElementsByClassName(\"container-ref\")[0];\n\n  // fungsi membuat input yang selalu berganti sesui opsi yang diinginkan\n  var crtInptDt = function crtInptDt(type) {\n    var arrInpt;\n    if (type == \"jurnal\") {\n      arrInpt = [\"Judul\", \"Penulis\", \"Nama Jurnal\", \"Tahun\", \"Volume\", \"Nomor\", \"Halaman\"\n      // \"ISBN\",\n      ];\n    } else if (type == \"buku\") {\n      arrInpt = [\"Judul\", \"Penulis\", \"Kota Terbit\", \"Penerbit\", \"Tahun\", \"Halaman\"\n      // \"Penterjemah\",\n      // \"ISBN\",\n      ];\n    } else if (type == \"tesis\") {\n      arrInpt = [\"Tipe EX: Tesis/Skripsi/Diseratsi\", \"Judul\", \"Penulis\", \"Kota\", \"Universitas\", \"Tahun\", \"Halaman\"];\n    } else if (type == \"website\") {\n      arrInpt = [\"Judul\", \"Penulis\", \"Tahun\", \"Link Sumber\", \"Tanggal Lengkap Akses\", \"Waktu Akses\"];\n    }\n    var form = document.createElement(\"form\");\n    var classForm = document.createAttribute(\"class\");\n    classForm.value = \"form-input\";\n    form.setAttributeNode(classForm);\n    var inptdFrag = document.createDocumentFragment();\n    arrInpt.forEach(function (e, i) {\n      var input = document.createElement(\"input\");\n      var namaInput = document.createAttribute(\"placeholder\");\n      if (e == \"ISBN\" || e == \"Penterjemah\") {\n        namaInput.value = e + \" (Opsional)\";\n      } else {\n        namaInput.value = e;\n      }\n      var type = document.createAttribute(\"type\");\n      type.value = \"text\";\n      var classInpt = document.createAttribute(\"class\");\n      classInpt.value = \"inpt-txt\";\n      input.setAttributeNode(namaInput);\n      input.setAttributeNode(type);\n      input.setAttributeNode(classInpt);\n      inptdFrag.appendChild(input);\n    });\n    form.appendChild(inptdFrag);\n    cntrRefInpt.appendChild(form);\n  };\n\n  // penjalan fungsi crtInptDt\n  if (selectType) {\n    selectType.addEventListener(\"change\", function () {\n      var formInpt = document.getElementsByClassName(\"form-input\")[0];\n      var indukElement = formInpt.parentElement;\n      indukElement.removeChild(formInpt);\n      crtInptDt(selectType.value);\n    });\n  }\n\n  // fungsi untuk mengambil data text dari input\n  btnConfirmTxt.addEventListener(\"click\", function () {\n    // tahap penyimpanan data ke indexedDB\n    (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.displayData)(2).then(function (res) {\n      var objDataTxt = {};\n      var cekDt = res.ref;\n      if (cekDt[0] == null) {\n        // console.log(cekDt, \"tst1\")\n        cekDt = [];\n      } else {\n        // console.log(cekDt, \"tst2\")\n      }\n      var idRef = 0 + cekDt.length;\n      idRef++;\n      objDataTxt.ID = idRef;\n      objDataTxt.type = selectType.value;\n      for (var i = 0; i < inptTxt.length; i++) {\n        var e = inptTxt[i];\n        objDataTxt[e.attributes.placeholder.value.split(\" \")[0]] = e.value;\n      }\n      cekDt.push(objDataTxt);\n      cekDt = cekDt.filter(function (e) {\n        return e;\n      });\n      (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.saveData)(cekDt, 2, \"ref\");\n      crtShowDt(objDataTxt);\n    })[\"catch\"](function (err) {\n      return err;\n    });\n  });\n\n  // fungsi membuat tampilan show ref\n  function crtShowDt(data) {\n    var showRefParent = document.createElement(\"div\");\n    var refClass = document.createAttribute(\"class\");\n    refClass.value = \"show-ref\";\n    showRefParent.setAttributeNode(refClass);\n    var showdFrag = document.createDocumentFragment();\n    var dtArrKeys = Object.keys(data);\n    for (var i = 0; i < dtArrKeys.length; i++) {\n      var shwTextP = document.createElement(\"p\");\n      if (dtArrKeys[i] == \"ID\") {\n        shwTextP.innerText = \"\".concat(dtArrKeys[i], \":\").concat(data[dtArrKeys[i]]);\n        shwTextP.style.display = \"none\";\n      } else {\n        shwTextP.innerText = \"\".concat(dtArrKeys[i], \": \").concat(data[dtArrKeys[i]]);\n      }\n      showdFrag.appendChild(shwTextP);\n    }\n    showRefParent.appendChild(showdFrag);\n    var btnDel = document.createElement(\"button\");\n    var idBtnDel = document.createAttribute(\"id\");\n    idBtnDel.value = \"ref-btn-del\";\n    btnDel.setAttributeNode(idBtnDel);\n    btnDel.innerText = \"HAPUS\";\n    showRefParent.appendChild(btnDel);\n    cntrRef.appendChild(showRefParent);\n  }\n\n  // fungsi untuk menghapus data refrensi\n  document.addEventListener(\"click\", function (event) {\n    (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.displayData)(2).then(function (res) {\n      res.ref = res.ref.filter(function (e) {\n        return e;\n      });\n      var arrayChildren = event.target.parentElement.children;\n      var triger = event.target;\n\n      // terduga bug urutan id yang salah ada di sini\n\n      // hapus data yang ditarget\n      if (triger.id == \"ref-btn-del\") {\n        var _iterator = _createForOfIteratorHelper(arrayChildren),\n          _step;\n        try {\n          var _loop = function _loop() {\n            var value = _step.value;\n            if (value.innerText.includes(\"ID:\")) {\n              var idElement = value.innerText.split(\":\")[1];\n              var dataAfterDelete = res.ref.filter(function (e) {\n                return e.ID != idElement;\n              });\n              // menyimpan kembali data yang baru\n              dataAfterDelete = dataAfterDelete.map(function (e, i) {\n                e.ID = i + 1;\n                return e;\n              });\n              (0,_client_save_js__WEBPACK_IMPORTED_MODULE_0__.saveData)(dataAfterDelete, 2, \"ref\");\n              location.reload(true);\n            }\n          };\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            _loop();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    })[\"catch\"](function (err) {\n      return err;\n    });\n  });\n\n  // fungsi untuk menghapus semua data\n}\n\n//# sourceURL=webpack://shortcut-docx/./public/javascripts/module/referensi_set.js?");

/***/ })

}]);